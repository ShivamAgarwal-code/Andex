import{a as u,j as y}from"./jsx-runtime-a888423b.js";import{r as c}from"./index-8db94870.js";import{J as E}from"./styled-components.browser.esm-05bde203.js";import{H as B}from"./Heading-def4fbf7.js";import{g as N}from"./getThemeValue-6fc24f62.js";import{$ as S,S as k,M as A,a as T,b as $,c as I,d as L,e as H,C as j}from"./ModalContext-901e5072.js";import{_ as q}from"./iframe-13deebe4.js";import{i as w}from"./lib-98203da3.js";import{r as W}from"./index-8ce4a492.js";import{b as J,c as z,e as K}from"./animationToolkit-f78aec88.js";import{g as Y}from"./getPortalRoot-b8664777.js";import{L as F,A as G}from"./index-ba04c57b.js";import{a as Q}from"./Overlay-c4441d34.js";import{u as U}from"./useMatchBreakpoints-59a9bcd0.js";import{B as X}from"./Box-f877d5fa.js";import{g as V}from"./get-8ca00567.js";const Z=()=>q(()=>import("./motionDomMax-438f68f9.js"),["./motionDomMax-438f68f9.js","./features-animation-7b2a34c9.js","./motion-minimal-b8fc2ac8.js","./index-8db94870.js","./_commonjsHelpers-042e6b4d.js"],import.meta.url).then(e=>e.default),ee=()=>q(()=>import("./motionDomAnimation-8a20da10.js"),["./motionDomAnimation-8a20da10.js","./features-animation-7b2a34c9.js","./motion-minimal-b8fc2ac8.js","./index-8db94870.js","./_commonjsHelpers-042e6b4d.js"],import.meta.url).then(e=>e.default),O=c.createContext({});function C({isOpen:e,onDismiss:t,closeOnOverlayClick:r,children:a,disableOutsidePointerEvents:n=!1,...o}){const s=c.useRef(null),i=d=>{d.stopPropagation(),d.preventDefault(),r&&(t==null||t())},l=Y();return l?W.createPortal(u(O.Provider,{value:{onDismiss:t},children:u(F,{features:w?Z:ee,children:u(G,{children:e&&u(S,{role:"dialog",disableOutsidePointerEvents:n,onEscapeKeyDown:i,children:y(k,{ref:s,onAnimationStart:()=>J(s.current),...z,variants:K,transition:{duration:.3},...o,children:[u(Q,{onClick:i}),a]})})})})}),l):null}try{C.displayName="ModalV2",C.__docgenInfo={description:"",displayName:"ModalV2",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!1,type:{name:"boolean"}},onDismiss:{defaultValue:null,description:"",name:"onDismiss",required:!1,type:{name:"(() => void)"}},closeOnOverlayClick:{defaultValue:null,description:"",name:"closeOnOverlayClick",required:!1,type:{name:"boolean"}},disableOutsidePointerEvents:{defaultValue:{value:"false"},description:"",name:"disableOutsidePointerEvents",required:!1,type:{name:"boolean"}}}}}catch{}const te=300,_=({children:e,onDismiss:t,hideCloseButton:r,...a})=>{const{isMobile:n}=U(),o=c.useRef(null);return u(H,{drag:n&&!r?"y":!1,dragConstraints:{top:0,bottom:600},dragElastic:{top:0},dragSnapToOrigin:!0,onDragStart:()=>{o.current&&(o.current.style.animation="none")},onDragEnd:(s,i)=>{i.velocity.y>te&&t&&t()},ref:o,style:{overflow:"visible"},children:u(X,{overflow:"hidden",borderRadius:"32px",...a,children:e})})},M=({title:e,onDismiss:t,onBack:r,children:a,hideCloseButton:n=!1,headerPadding:o="12px 24px",bodyPadding:s="24px",headerBackground:i="transparent",minWidth:l="320px",headerRightSlot:d,bodyAlignItems:p,headerBorderColor:g,bodyTop:h="0px",...m})=>{const f=c.useContext(O),b=(f==null?void 0:f.onDismiss)||t,R=E();return y(_,{minWidth:l,onDismiss:b,hideCloseButton:n,...m,children:[y(A,{background:N(R,`colors.${i}`,i),p:o,headerBorderColor:g,children:[y(T,{children:[r&&u($,{onBack:r}),u(B,{children:e})]}),d,!n&&u(I,{onDismiss:b})]}),u(L,{position:"relative",top:h,onPointerDownCapture:D=>D.stopPropagation(),p:s,style:{alignItems:p??"normal"},children:a})]})},be=M;try{_.displayName="ModalWrapper",_.__docgenInfo={description:"",displayName:"ModalWrapper",props:{hideCloseButton:{defaultValue:{value:"false"},description:"",name:"hideCloseButton",required:!1,type:{name:"boolean"}},onDismiss:{defaultValue:null,description:"",name:"onDismiss",required:!1,type:{name:"Handler"}},mode:{defaultValue:null,description:"",name:"mode",required:!1,type:{name:"string"}}}}}catch{}try{M.displayName="Modal",M.__docgenInfo={description:"",displayName:"Modal",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"ReactNode"}},hideCloseButton:{defaultValue:{value:"false"},description:"",name:"hideCloseButton",required:!1,type:{name:"boolean"}},onBack:{defaultValue:null,description:"",name:"onBack",required:!1,type:{name:"(() => void)"}},headerPadding:{defaultValue:{value:"12px 24px"},description:"",name:"headerPadding",required:!1,type:{name:"string"}},bodyPadding:{defaultValue:{value:"24px"},description:"",name:"bodyPadding",required:!1,type:{name:"string"}},headerBackground:{defaultValue:{value:"transparent"},description:"",name:"headerBackground",required:!1,type:{name:"string"}},headerRightSlot:{defaultValue:null,description:"",name:"headerRightSlot",required:!1,type:{name:"ReactNode"}},bodyAlignItems:{defaultValue:null,description:"",name:"bodyAlignItems",required:!1,type:{name:"string"}},headerBorderColor:{defaultValue:null,description:"",name:"headerBorderColor",required:!1,type:{name:"string"}},bodyTop:{defaultValue:{value:"0px"},description:"",name:"bodyTop",required:!1,type:{name:"string"}},onDismiss:{defaultValue:null,description:"",name:"onDismiss",required:!1,type:{name:"Handler"}},mode:{defaultValue:null,description:"",name:"mode",required:!1,type:{name:"string"}}}}}catch{}function x(e,t){return e.slice(0,t).join(".")||"."}function v(e,t){const{length:r}=e;for(let a=0;a<r;++a)if(e[a]===t)return a+1;return 0}function ae(e,t){const r=typeof e=="function",a=typeof t=="function",n=[],o=[];return function(i,l){if(typeof l=="object")if(n.length){const d=v(n,this);d===0?n[n.length]=this:(n.splice(d),o.splice(d)),o[o.length]=i;const p=v(n,l);if(p!==0)return a?t.call(this,i,l,x(o,p)):`[ref=${x(o,p)}]`}else n[0]=l,o[0]=i;return r?e.call(this,i,l):l}}function P(e,t,r,a){return JSON.stringify(e,ae((n,o)=>{const s=typeof o=="bigint"?`#bigint.${o.toString()}`:o;return(t==null?void 0:t(n,s))||s},a),r??void 0)}const oe=(e,t=!0,r=!1,a="defaultNodeId")=>{const n=c.useRef();n.current=e;const{isOpen:o,nodeId:s,modalNode:i,setModalNode:l,onPresent:d,onDismiss:p}=c.useContext(j),g=c.useCallback(()=>{d(n.current,a,t)},[a,d,t]),h=c.useCallback(()=>{s===a&&(p==null||p())},[a,p,s]);return c.useEffect(()=>{if(r&&o&&s===a){const m=V(e,"props"),f=V(i,"props");m&&f&&P(m)!==P(f)&&l(e)}},[r,s,a,o,e,i,l]),[g,h]},Ve=oe;export{be as M,Ve as u};
